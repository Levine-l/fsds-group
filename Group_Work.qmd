---
date: last-modified
bibliography: https://raw.githubusercontent.com/Levine-l/fsds-group/main/bio.bib
csl: https://raw.githubusercontent.com/Levine-l/fsds-group/main/harvard-cite-them-right.csl
title: Emberfire's Group Project
execute:
  echo: false
  freeze: true
  warning: false
format:
  html:
    code-copy: true
    code-link: true
    toc: true
    toc-title: On this page
    toc-depth: 2
    toc_float:
      collapsed: false
      smooth_scroll: true
  pdf:
    include-in-header:
      text: |
        \addtokomafont{disposition}{\rmfamily}
    mainfont: Spectral
    sansfont: "Roboto Flex"
    monofont: "Liberation Mono"
    papersize: a4
    geometry:
      - top=25mm
      - left=40mm
      - right=30mm
      - bottom=25mm
      - heightrounded
    toc: false
    number-sections: false
    colorlinks: true
    highlight-style: github
jupyter:
  jupytext:
    text_representation:
      extension: .qmd
      format_name: quarto
      format_version: '1.0'
      jupytext_version: 1.15.2
  kernelspec:
    display_name: Python 3 (ipykernel)
    language: python
    name: python3
---

## Declaration of Authorship {.unnumbered .unlisted}

We, [Emberfire], pledge our honour that the work presented in this assessment is our own. Where information has been derived from other sources, we confirm that this has been indicated in the work. Where a Large Language Model such as ChatGPT has been used we confirm that we have made its contribution to the final submission clear.

Date: 15/12/2025

Student Numbers:  25222039  25167249  25250816  25060322

## Priorities for Feedback

Are there any areas on which you would appreciate more detailed feedback if we're able to offer it?

{{< pagebreak >}}



{{< pagebreak >}}

# Briefing


```{python}
#| output: false
#Start data loading and preprocessing
from conf import *
from ydata_profiling import ProfileReport
from pathlib import Path
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from urllib.request import urlopen
from functools import wraps
import geopandas as gpd
from shapely.geometry import Point
from sklearn.neighbors import KernelDensity
import contextily as cx
from sklearn.preprocessing import StandardScaler
from sklearn.cluster import KMeans
```

```{python}
#| output: false
#Set the path of the data rather than in local.
base= Path('.')
DATA_DIR = base / "data" / "clean"
DATA_DIR.mkdir(parents=True, exist_ok=True)
#The Airbnb data
DATA_URL = "https://orca.casa.ucl.ac.uk/~jreades/data/20250615-London-listings.csv.gz"
DATA_PATH = DATA_DIR / "20250615-London-listings.csv.gz"
```

```{python}
#| output: false
#Wrap the download data function with the decorato, and
#download the Airbnb data.
def check_cache(f):
    @wraps(f)
    def wrapper(src, dest):
        dest = Path(dest)
        if dest.exists() and dest.is_file():
            print(f"{dest} found locally!")
            return dest
        else:
            print(f"{dest} not found, downloading!")
            return f(src, dest)
    return wrapper

@check_cache
def download_data(src, dest):
    dest = Path(dest)
    dest.parent.mkdir(parents=True, exist_ok=True)
    response = urlopen(src)
    with dest.open("wb") as f:
        f.write(response.read())
    print(f"Data written to {dest}!")
    return dest

def load_listings():
    local_path = download_data(DATA_URL, DATA_PATH)
    return pd.read_csv(local_path)

# print a few for test.
df = load_listings()
df.head()
```

```{python}
#| output: false
#Set the path of spatial data
SPATIAL_DIR = base / 'data' / 'spatial'
SPATIAL_DIR.mkdir(parents=True, exist_ok=True)
```

```{python}
#| output: false
#make a function to download the spatial data
def download_spatial(src_url, filename):
    dest = SPATIAL_DIR / filename
    if dest.exists():
        print(f"{filename} found locally!")
        return dest
    
    print(f"Downloading {filename}...")
    response = urlopen(src_url)
    with open(dest, 'wb') as f:
        f.write(response.read())
    print(f"Saved to {dest}")
    
    return dest

#the url of every spatial data
RAW_URLS = {
    "boroughs": "https://raw.githubusercontent.com/jreades/fsds/master/data/src/Boroughs.gpkg",
    "water": "https://raw.githubusercontent.com/jreades/fsds/master/data/src/Water.gpkg",
    "greenspace": "https://raw.githubusercontent.com/jreades/fsds/master/data/src/Greenspace.gpkg",
    "msoa": "https://orca.casa.ucl.ac.uk/~jreades/data/MSOA-2011.gpkg",
    "msoa_names": "https://houseofcommonslibrary.github.io/msoanames/MSOA-Names-1.20.csv",
}
```

```{python}
#| output: false
# Download all spatial files defined in RAW_URLS
local_paths = {}  # store downloaded paths

for key, url in RAW_URLS.items():
    filename = url.split("/")[-1]  # extract file name from URL
    local_path = download_spatial(url, filename)
    local_paths[key] = local_path  # store for later use
```

```{python}
#define every spatial data
boroughs = gpd.read_file(local_paths["boroughs"])
msoa_origin = gpd.read_file(local_paths["msoa"])
greenspace = gpd.read_file(local_paths["greenspace"])
msoa_names = pd.read_csv(local_paths["msoa_names"])
water= gpd.read_file(local_paths["water"])
```

```{python}
#Because the main analysis is based on price, property type, number of listings from the landlord, and number of bookable nights, we are doing some data cleaning on that.
#remove special character in price
df['price'] = (df['price'].astype(str)
        .str.replace("$", "", regex=False)
        .str.replace(",", "", regex=False)
        .replace("", None)
        .astype(float)
    )

#remove invalid prices
df = df[df['price'] > 0].copy()

#keep valid availability range
df = df[df['availability_365'].between(0, 365)]

#drop listings without spatial coordinates
df = df.dropna(subset=['latitude', 'longitude'])
#fill missing host listing count
df['host_total_listings_count'] = df['host_total_listings_count'].fillna(1)
#because there are some extreme luxury house, may set a cap on price.
df = df[df['price'] < 2000] #2000 maybe a proper price cap..
```

```{python}
#merge the msoa data and msoa names
msoa = msoa_origin.merge(
    msoa_names,
    left_on="MSOA11CD",
    right_on="msoa11cd",
    how="left"
)
```

```{python}
#| output: false
#In order to prepare for the future further analysis, transform the Airbnb data from df to gdf, check the crs, and then join with the msoa.
#Read info about the msoa
#msoa.head()
msoa.crs
```

```{python}
#| output: false
#Convert listings DataFrame to points
gdf_listings = gpd.GeoDataFrame(df,
                                geometry=gpd.points_from_xy(df['longitude'], df['latitude']),
                                crs="EPSG:4326")

#find if need to reproject listings to match msoa crs
if msoa.crs is not None and gdf_listings.crs != msoa.crs:
    gdf_listings = gdf_listings.to_crs(msoa.crs)

gdf_listings.head()
```

```{python}
#| output: false
#show msoa columns
print(msoa.columns)
```

```{python}
#| output: false
#Keep only geometry and MSOA identifiers for the join
msoa_1 = msoa[['MSOA11CD', 'MSOA11NM', 'geometry']]

#left join them
listings_msoa = gpd.sjoin(gdf_listings,msoa_1,how='left',predicate='within')

listings_msoa.head()
```

```{python}
#Ensure availability_365 and price are numeric
listings_msoa['availability_365'] = pd.to_numeric(listings_msoa['availability_365'])
listings_msoa['price'] = pd.to_numeric(listings_msoa['price'])
```

```{python}
#drop rows where MSOA11CD is missing (outside London polygons)
listings_msoa = listings_msoa.dropna(subset=['MSOA11CD'])
```




## Question 1: Is Airbnb out of control in London?

To assess whether Airbnb in London is experiencing "over control", we may say some illegal renting or pricing may causing over control. 

### 1.1 90-days rule
London’s short-let regulation limits short-term rentals to a maximum of 90 days per year unless a special permit is obtained (@90_day_rule). Exceeding this threshold provides a useful basis for assessing whether Airbnb activity has moved beyond casual home-sharing toward more intensive, potentially commercial use.

**Assumption**

We assumed that the availability_365 level of listings could be used as an indicator of the intensity of short-term rental activity. When a listing shows availability above 90 days, it could indicate a policy violation or evidence that the host is operating a professional rental business, rather than as a casual home-sharer.


```{python}
#The availability_365 distribution can indicate 
#whether Airbnb in London is a "seasonal short-term rental" 
#(low availability) or a "year-round operation" 
#(high availability).

# Plot distribution of availability_365
plt.figure(figsize=(10, 7))
plt.hist(df['availability_365'], bins=50, color='steelblue')
plt.xlabel("available days a year)")
plt.ylabel("Count of listings")
plt.title("Distribution of Airbnb availability in London")
plt.show()
```


```{python}
#availability_365 > 90 is a potential key element
#of illegal hosting. 

#count the number of listing over 90, 180 and 300.
over_90 = (df['availability_365'] > 90)
over_180 = (df['availability_365'] > 180)
over_300 = (df['availability_365'] > 300)

print(f"Ratio of listings available > 90 days: {over_90.mean():.2%}")
print(f"Ratio of listings available > 180 days: {over_180.mean():.2%}")
print(f"Ratio of listings available > 300 days: {over_300.mean():.2%}")
```

```{python}
# Compare availability patterns across room types
room_groups = df.groupby('room_type')['availability_365']

over_90_by_room = room_groups.apply(lambda x: (x > 90).mean())
print("Ratio of >90-day listings by room type:")
print((over_90_by_room * 100).round(2).astype(str) + "%")
```

Based on this quantitative data, these proportions suggest that the majority of listings are potentially 
non-compliant with short-let regulations and are managed like business units. It is important to mention that availability_365 measures potential availability rather than realised occupancy. However, when such high proportions consistently exceed the regulatory threshold across property types, this strongly suggests that there are systematic non-compliance rather than incidental.


```{python}
#plot ratio of property type >90
ax = over_90_by_room.plot(kind='bar', figsize=(10, 7), color='steelblue')
ax.set_xlabel("property Type")
ax.set_ylabel("Ratio of listings > 90 days")
ax.set_title("Ratio of listings exceeding 90 days by room type")
plt.xticks(rotation=0)
plt.show()
```

When we compared this pattern by property type, the entire home/apartment category had an availability rate of >90 days at 73.72%. Categories like hotel rooms and shared rooms even showed higher rates, indicating the presence of quasi-hotels and multi-room operators operating through the platform. This finding corresponds with the study conducted by @shabrina_airbnb_2022, which identified that Airbnb misused in London was prevalent in entire homes in areas with a high private rental stock.


```{python}
#| warning: false
#| message: false
#Also can look at the price level of those over 90 days a year.
df['over_90'] = df['availability_365'] > 90

plt.figure(figsize=(8, 5))
df.boxplot(column='price', by='over_90')
plt.title("Airbnb price distribution by >90-day availability")
plt.suptitle("")
plt.xlabel("Over 90 days available?")
plt.ylabel("Price (£)")
plt.show()
```

Listings operating for more than 90 days also tend to have higher prices than compliant listings, with numerous outliers reaching £1,000–£2,000 per night. This pricing pattern is consistent with the argument of @barron_effect_2021 that Airbnb expansion facilitates a shift of housing from the long-term to the short-term rental market, placing upward pressure on rents and property values.

**Conclusion**

Taken together, high levels of availability beyond the 90-day limit, consistent patterns across property types, and pricing signals associated with commercial use suggest that Airbnb activity in London exhibits characteristics of being “out of control.” The platform appears increasingly dominated by professional operators running large-scale short-term rental businesses rather than occasional home-sharing, with potential consequences for long-term housing availability.

**Limitation**

Availability_365 does not directly measure occupancy and may overestimate non-compliance where hosts block calendars for non-rental reasons. 


### 1.2 Price level

Price levels provide a complementary indicator of whether Airbnb activity in London has shifted from casual home-sharing toward commercial operation.

**Assumption**

We assume that consistently high nightly prices are more likely to reflect professionally managed, investment-oriented properties than occasional room rentals by residents.



```{python}
#Plot distribution of Airbnb prices
plt.figure(figsize=(10, 7))
plt.hist(df['price'], bins=50, color='teal')
plt.xlabel("Price (£)")
plt.ylabel("Count of listings")
plt.title("Distribution of Airbnb Prices in London (under £1000)")
plt.show()
```

```{python}
#Look at some statistics on price
print("Price summary statistics:")
print(df['price'].describe())
```

Price data show a highly unequal distribution. The average nightly price is approximately £185, with a median of £134, while extreme values reach nearly £2,000 per night. Using £200 per night as a conservative threshold for high-priced listings, we find that 29.38% of listings exceed this level, a substantial share for a market intended to support non-commercial short-term rentals.


```{python}
#We set a price level that ober 200 a night 
#could be "higher than usual", It may deviate from 
#Airbnb's original purpose.

high_price = df['price'] > 200
print(f"Share of listings priced > £200: {high_price.mean():.2%}")
#Shows price over 200 by room type.
high_price_by_type = df.groupby('room_type')['price'].apply(lambda x: (x > 200).mean())
print("\nShare of >£200 listings by room type:")
print((high_price_by_type * 100).round(2).astype(str) + "%")
```

Disaggregating by property type reveals clearer signs of commercialisation. Entire homes/apartments show the highest concentration of high-priced listings, with 41.32% priced above £200 per night. This is particularly significant because this category poses the greatest risk to long-term housing supply when diverted to short-term use. In contrast, private and shared rooms show far lower proportions of high-priced listings.



```{python}
#Combine with the 90 days rule, count the ratio that
#satisfy over 200 a night and 90 a year.
df['over_90'] = df['availability_365'] > 90
df['high_price'] = df['price'] > 200
df['high_high'] = df['over_90'] & df['high_price']

print(f"Share of listings both >90 days and >£200: {df['high_high'].mean():.2%}")
```

When combined with availability patterns from Section 1.1, 22.91% of listings are both available for more than 90 days and priced above £150, suggesting operation as full-time, high-priced accommodation. This aligns with findings by @barron_effect_2021 that Airbnb expansion encourages the conversion of residential housing into short-term commercial assets.

**Conclusion**

Overall, this pricing analysis reinforces the conclusion that Airbnb in London is showing signs of being out of control. 

**Limitation**

High prices may also reflect location or property quality rather than professional management. 


### 1.3 Kernel Density Estimation

In order to understand the spatial distribution pattern of Airbnb in London, we decided to use KDE to observe the overall trend of spatial intensity.

**Assumption**

From their spatial concentration， the underlying assumption is that strong spatial clustering, particularly when combined with high availability and high prices, reflects commercialised short-term rental activity rather than dispersed, casual home-sharing.


```{python}
#Firstly, aggregate listing data to the mosa level
listings_msoa['over_90'] = listings_msoa['availability_365'] > 90
msoa_stats_q1 = listings_msoa.groupby('MSOA11CD').agg(
    n_listings=('price', 'size'),#number of listing for every msoa
    ratio_over_90=('over_90', 'mean'),#ratio of listing >90 days
    mean_price=('price', 'mean')#mean price
).reset_index()

msoa_stats_q1.head()
```

We apply Kernel Density Estimation (KDE) to identify patterns of spatial intensity across London. Prior to the KDE analysis, listing data were aggregated to the MSOA level to calculate the number of listings, the share exceeding 90 days of availability, and average prices in each area. This allowed spatial density patterns to be interpreted alongside indicators of regulatory pressure and commercial use. Using individual listing coordinates, KDE was then applied with a bandwidth of 750 metres to estimate areas of concentrated Airbnb activity.


```{python}
#Convert listing points to EPSG:27700 for KDE
gdf_kde = gdf_listings.to_crs(epsg=27700)
#gdf_kde.head()
```

```{python}
#extract coordinates for KDE
coords = np.vstack([gdf_kde.geometry.x,gdf_kde.geometry.y]).T#transpose the matrix for kde
#coords[:5]#show some of the matrix to check if success
```

```{python}
#| output: false
#set a bandwidth to 750m in epsg27700
bandwidth = 750
kde = KernelDensity(bandwidth=bandwidth, kernel='gaussian')
kde.fit(coords)
```

```{python}
# Create grid over bounding of London
x_min, y_min, x_max, y_max = gdf_kde.total_bounds
xgrid = np.linspace(x_min, x_max, 200)
ygrid = np.linspace(y_min, y_max, 200)
xx, yy = np.meshgrid(xgrid, ygrid)
grid_points = np.vstack([xx.ravel(), yy.ravel()]).T
```

```{python}
# Evaluate KDE on grid
z = np.exp(kde.score_samples(grid_points))
z = z.reshape(xx.shape)
```

```{python}
#plot the KDE
plt.figure(figsize=(10, 7))
plt.imshow(z,origin='lower',extent=(x_min, x_max, y_min, y_max),cmap='hot',alpha=0.7)#I think brighter is easier to see.

#Because only KDE is hard to analysis, we add London boundary onto it.
boroughs.to_crs(epsg=27700).boundary.plot(ax=plt.gca(),color='white',linewidth=0.8)

plt.title("Kernel Density of Airbnb in London")
plt.colorbar(label='Density')
plt.axis('off')
plt.show()
```

```{python}
plt.figure(figsize=(10, 7))
plt.imshow(z,origin='lower',extent=(x_min, x_max, y_min, y_max),cmap='hot',alpha=0.7)
boroughs.to_crs(epsg=27700).boundary.plot(ax=plt.gca(),color='white',linewidth=0.8)
#Above code is same with the code in the upper chunk

#I zoom into the city centre this time
plt.xlim(515000, 540000)
plt.ylim(170000, 190000)


plt.title("Kernel Density of Airbnb in London")
plt.colorbar(label='Density')
plt.axis('off')
plt.show()
```

**Conclusion**

The results show that Airbnb activity is highly concentrated in central London, rather than evenly distributed across the city. These areas also coincide with locations most exposed to housing market pressures. This spatial concentration reinforces earlier findings that Airbnb activity in London exhibits characteristics of being “out of control,” combining regulatory exceedance with intensive use in high-value areas. This pattern is consistent with international evidence linking central-city Airbnb density to rising rents and the conversion of residential housing into short-term rentals (@barron_effect_2021).

**Limitation**

KDE results are sensitive to bandwidth choice and do not directly measure occupancy or displacement. 


### 1.4 Airbnb Distribution in London

This map provides a descriptive overview of the spatial concentration of Airbnb listings across London boroughs. While it does not constitute a formal hotspot analysis, the strong visual clustering suggests that Airbnb activity is highly uneven and concentrated in specific inner-city areas.

**Assumption**

To further assess whether Airbnb activity in London is “out of control,” we examine its borough-level concentration and the frequency of multi-listers which we defined as hosts operating more than two listings. We use multi-lister share as a proxy for professionalisation, under the assumption that managing multiple properties simultaneously requires capital, operational capacity, and a business-oriented model rather than casual home-sharing.


```{python}
#| output: false
gdf_la = gpd.sjoin(
    gdf_listings,
    boroughs[["NAME", "geometry"]],
    predicate="within",
    how="left"
)

# check it
gdf_la[["id", "NAME"]].head()
```

```{python}
#| output: false
borough_stats = (
    gdf_la.groupby('NAME')
          .agg(
              total_listings=('id', 'nunique'),
              multi_lister_share=(
                  'host_total_listings_count',
                  lambda x: (x > 2).mean()
              )
          )
          .sort_values('total_listings', ascending=False)
)

borough_stats
```
```{python}
# Select top 10 boroughs by total listings
top_boroughs = borough_stats.head(10)

fig, ax1 = plt.subplots(figsize=(10, 6))

# Bar plot: total listings
ax1.bar(
    top_boroughs.index,
    top_boroughs['total_listings'],
    color='steelblue',
    alpha=0.8
)
ax1.set_ylabel('Total number of listings')
ax1.set_xlabel('London borough')
ax1.set_xticklabels(top_boroughs.index, rotation=45, ha='right')

# Line plot: share of multi-lister hosts
ax2 = ax1.twinx()
ax2.plot(
    top_boroughs.index,
    top_boroughs['multi_lister_share'],
    color='darkred',
    marker='o'
)
ax2.set_ylabel('Ratio of listings from multi-lister hosts')

plt.title('Airbnb concentration and professionalisation by borough (Top 10)')
plt.tight_layout()
plt.show()
```

This chart shows the distribution of Airbnb housing in various borough of London. The bar chart shows the total number of Airbnb by borough, and the line shows the proportion of Airbnb operated by multiple landlords. There is a significant correlation between spatial concentration and professionalisation. Westminster records the largest (8,347), followed by Kensington and Chelsea (4,697), Camden (4,473) and Tower Hamlets (4,414). The proportion of multiple listings host in these administrative regions is also significantly high, which shows that the area where Airbnb housing resources are most concentrated is also the area where professional landlords are most concentrated. This find just coincides with the strong tourism demand and high housing prices in central and inner-west London, further confirming that Airbnb's activities in London are highly localised rather than evenly distributed throughout the city.


```{python}
fig, ax = plt.subplots(figsize=(9,7))

# Click to color the name Borough
gdf_la.plot(column='NAME', markersize=0.5, alpha=0.5, ax=ax)

# Borough boundary
boroughs.plot(ax=ax, edgecolor='r', facecolor='None', alpha=0.5)

ax.set_title(
    "Spatial Distribution of Airbnb Listings by London Borough",
    fontsize=16,
    pad=12
)

ax.set_axis_off()
plt.show()
```

We also calculated the multi-lister share, which is the proportion of hosts who have more than two listings. This indicator shows the level of Airbnb's commercialization within a borough. The results are striking: the boroughs with the highest total listings also have the highest multi-listing rates. For example, Westminster recorded a multi-listing share of 84%, followed by Kensington and Chelsea (80%) and Camden (77%). These figures indicate that the majority of listings in London's core areas are not managed by home hosts but rather by professional operators operating multiple units, which indicates a large-scale short-term rental business model.

**Conclusion**

Overall, Central and Western London boroughs are were most of the dense clusters are, while suburban boroughs tend to have lower densities (@shabrina_airbnb_2022). In other words, we found that the Airbnb-related crisis was not city-wide, but concentrated in a few strategic hotspots that played a large role in reducing the availability of long-term housing and increasing price pressures in central London. So, from the borough-level analysis demonstrates that Airbnb in London exhibits characteristics of being “out of control” in a spatially concentrated and professionalised manner. 

**Limitation**

We acknowledge that the “more than two listings” threshold may undercount professional operators who distribute properties across platforms or corporate structures. However, even under this conservative definition, the extremely high multi-lister shares observed in central boroughs provide strong evidence of systematic professionalisation.



### 1.5 MSOA-Level Airbnb Activity in Westminster

As shown in the map above, Westminster has the highest concentration of listings, so we zoom in this area for a more detailed MSOA-Level Airbnb Activity analysis.

**Assumption**

 We conducted a more detailed analysis, focusing on the borough of Westminster, the area with the highest number of Airbnb listings in all of London. The aim of this analysis was to understand whether the “out of control” pattern is limited to the borough as a whole, or whether the concentration is even stronger when viewed at a smaller spatial level, namely Middle Layer Super Output Areas (MSOAs). By performing geometric clipping specifically for Westminster and then spatially joining the listing points and MSOA polygons, we were able to precisely calculate the number of listings in each MSOA.


```{python}
#Only take the Borough polygon from Westminster.
LA = "Westminster"
west_boro = boroughs[boroughs["NAME"] == LA].copy()
print("Westminster polygon number:", len(west_boro))

#Use Westminster polygon to crop MSOA (only keep MSOAs in Westminster).
msoa_west = gpd.clip(msoa, west_boro)
print("The number of MSOA in Westminster:", len(msoa_west))

pts_west_msoa = gpd.sjoin(
    gdf_listings,
    msoa_west[["MSOA11CD", "MSOA11NM", "geometry"]],
    predicate="within",
    how="inner"     # just need the spots in MSOA
)
print("The number of listings in Westminster:", len(pts_west_msoa))

#Statistics by MSOA: How many listings are there per MSOA?
msoa_stats = (
    pts_west_msoa
      .groupby(["MSOA11CD", "MSOA11NM"])
      .size()
      .reset_index(name="listing_count")
)
#print("\nExample of MSOA statistics in Westminster：")
#print(msoa_stats.head())

#Merge listing_count back into Westminster's MSOA polygon
msoa_west_counts = msoa_west.merge(
    msoa_stats,
    on=["MSOA11CD", "MSOA11NM"],
    how="left"
)

#For MSOA without a listing, enter 0.
msoa_west_counts["listing_count"] = msoa_west_counts["listing_count"].fillna(0)

#Convert to Web Mercator for overlaying background images
msoa_west_3857 = msoa_west_counts.to_crs(epsg=3857)
```

```{python}
#print some info about listings in Westminster.
print(
    f"Across Westminster MSOAs, listing counts range from "
    f"{msoa_stats['listing_count'].min()} to "
    f"{msoa_stats['listing_count'].max()}, "
    f"with a median of {msoa_stats['listing_count'].median()}."
)
```

```{python}
print("\nHere are the top 5 count of listings for Westminster MSOAs.")
msoa_stats.sort_values('listing_count', ascending=False).head(5)
```

```{python}
#plot：MSOA-Level Airbnb Activity in Westminster
fig, ax = plt.subplots(figsize=(8, 8))
msoa_west_3857.plot(
    column="listing_count",
    cmap="OrRd",
    linewidth=0.4,
    edgecolor="white",
    legend=True,
    ax=ax,
    alpha=0.85
)
cx.add_basemap(ax, source=cx.providers.CartoDB.Positron)
ax.set_axis_off()
ax.set_title("MSOA-Level Airbnb Activity in Westminster", fontsize=16)
plt.show()
```

The analysis revealed a total of 8,345 Airbnb listings in Westminster, a figure that confirms the borough's dominance as a major hotspot for short-term rental activity. However, the distribution is uneven within Westminster. Across Westminster MSOAs, listing counts range from very low levels to over one thousand, with the median MSOA containing far fewer listings, showing the extreme skew in the internal distribution. The map shows that several MSOAs in the east and southeast of Westminster have very high Airbnb intensity. These areas include the areas around Covent Garden, Soho, Leicester Square, and Victoria, areas that boast a unique combination of tourist attractions, major transport stations, and very high commercial density.


In contrast, MSOAs located in the western half of Westminster, such as districts surrounding Maida Vale or St John's Wood exhibit much lower listing counts which indicates  that Airbnb is not only concentrated within the borough of Westminster, but also concentrated in specific pockets within it. In other words, the problem of short-term rentals, potentially violating the 90-day regulation and encouraging property commercialization, occurs in these super-dense zones, which cover only a small portion of Westminster but have a significant impact on the local housing market.

**Conclusion**

This MSOA analysis reinforces the conclusion that Airbnb in London, particularly in Westminster is showing very clear signs of being “out of control.” Even within a single borough, there are areas with such high listing levels that they likely operate more like informal hotels than simply home-sharing platforms. Furthermore, the extreme centralization pattern we found at the MSOA level is consistent with the findings of @shabrina_airbnb_2022, which explains that Airbnb abuse is most intense in locations with high tourism demand and high housing pressure.
 

**Limitation**

We acknowledge that this MSOA-level analysis focuses exclusively on Westminster, the borough with the highest Airbnb concentration, and therefore may not be representative of intra-borough patterns elsewhere in London. In addition, MSOA-level counts capture the number of listings rather than actual occupancy or frequency of use, meaning that high listing density does not necessarily imply continuous activity or regulatory non-compliance. Finally, while MSOAs provide finer spatial resolution than boroughs, they may still mask variation within very small neighbourhoods or individual buildings, particularly in areas with dense mixed-use development.



### 1.6 MSOA-level CLustering

To identify the spatial types of Airbnb activities in London, we selected three variables at the MSOA level to do clustering.

**Assumption**

We assume that the three selected variables, such as listing count, average price, and the share of listings exceeding 90 days represent the fundamental aspect of Airbnb intensity and commercialisation at the neighbourhood level. We also assume that k-means clustering with three clusters provides us a useful and understanable way to group Airbnb activity, balancing analytical simplicity with sufficient differentiation across MSOAs.


```{python}
#features for clustering
features = msoa_stats_q1[['ratio_over_90', 'n_listings', 'mean_price']].copy()
# Replace missing values with 0
features = features.fillna(0)
features.describe()
```

```{python}
#Because there is a large difference between the value of those three variables, 
#we need to do a standardisation.
scaler = StandardScaler()
X_scaled = scaler.fit_transform(features)
```

```{python}
#Use KMeans as the clustering method
kmeans = KMeans(n_clusters=3, random_state=42,n_init=10)#I choose 3 because it's kinda moderate.
clusters = kmeans.fit_predict(X_scaled)

msoa_stats_q1['cluster'] = clusters
msoa_stats_q1['cluster'].value_counts()
```

```{python}
#Comparing mean value of cluster for those three variables.
cluster_profile = (msoa_stats_q1.groupby('cluster')[['ratio_over_90', 'n_listings', 'mean_price']].mean().round(3))

cluster_profile
```

```{python}
#add a lable to cluster
cluster_labels = {
    0: "High Airbnb represent areas",
    1: "Moderate Airbnb activity areas",
    2: "Low Airbnb presence areas"
}

msoa_stats_q1['cluster_label'] = msoa_stats_q1['cluster'].map(cluster_labels)
```

```{python}
#keep only geometry and identifier for mapping
msoa_min=msoa[['MSOA11CD','MSOA11NM','geometry']].copy()
#attach cluster labels to msoa
msoa_stats_q1['cluster']=clusters
```

```{python}
#merge cluster results back onto msoa polygon
msoa_ready=msoa_min.merge(msoa_stats_q1,on='MSOA11CD',how='left')
```

```{python}
#Plot a graph of MSOA-level Airbnb area types based on clustering.
fig, ax = plt.subplots(figsize=(10,7))

msoa_ready.plot(
    column='cluster_label',
    categorical=True,
    legend=True,
    ax=ax,
    linewidth=0.1,
    edgecolor='white'
)

ax.set_axis_off()
ax.set_title("MSOA-level Airbnb Typologies (Clustering)")
plt.show()
```

The k-means clustering results yield three distinct Airbnb area types. The highest-intensity cluster is characterized by a combination of a very large number of listings, high average prices, and significant violations of the 90-day rule which strongly concentrated in Central London. In this context, our clustering provides additional evidence that the phenomenon is not only evident at the borough level but also structured down to the neighborhood scale (MSOA).

The second cluster exhibits a different, but still problematic, pattern. Although the number of listings and average prices are lower than those in the intensive cluster, areas within this cluster have the highest proportion of listings >90 days. This suggests that in semi-residential areas, Airbnb operates more “invisibly” as a sustainable short-term rental, though not always at a large scale or at premium prices. This pattern supports what Barron et al. (2021) said that Airbnb has the biggest effect on the housing market when residential units are switched from the long-term to the short-term rental market, no matter where they are. 

By contrast, the low-intensity cluster includes the majority of London’s suburban MSOAs, characterised by fewer listings, more moderate prices, and lower rates of 90-day exceedance. This cluster most closely reflects the original home-sharing model of Airbnb and indicates that “out of control” dynamics are not present uniformly across the city.

**Conclusion**

The MSOA-level clustering confirms that Airbnb in London is not only concentrated in certain areas but also work differently indifferent neihborhoods. High- and medium-intensity clusters show where Airbnb is most likely to be a long-term business, which could affect the availability of housing and the stability ofneighboorhoods. These results support the idea that policies should be tailored to certain areas and have diverse structures, rather than being the same for the whole city.
 

**Limitation**

We acknowledge that the clustering results are sensitive to the choice of variables and the number of clusters, and alternative specifications could yield slightly different typologies. In addition, MSOA-level aggregation may mask variation within smaller neighbourhoods or individual buildings, particularly in dense mixed-use areas. Finally, the analysis relies on listing characteristics rather than direct measures of occupancy or profitability, meaning that cluster membership reflects potential intensity of use rather than confirmed regulatory non-compliance.


### 1.7 Overall Conclusion

Based on the overall analysis of 1.1–1.6, we conclude that Airbnb in London exhibits a spatially and structurally “out-of-control” situation, although not uniformly across the city. Airbnb’s regulatory overreach, combined with high prices, extreme density in the city center, and the dominance of professional hosts, suggests that the platform has shifted from a home-sharing model to a commercialized short-term rental operation. 


## Question 2: How many professional landlords are there?

Following common practice in the literature by @xie_professional_2021, we adopt a strict definition of professional landlords as those controlling more than two listings on Airbnb. This threshold helps distinguish occasional sharing from commercial operation and aligns with multi-listing criteria used in empirical studies of professional activity on the platform.

```{python}
#calculate proportion of hosts with more than 2 listings
host_counts = df['host_total_listings_count']
multiratio = (host_counts > 2).mean()
print(f"Ratio of hosts with >2 listings: {multiratio:.2%}")

#Define bin and labels（menas how houses many a host renting)
bins = [0, 1, 4, 9, 19, 49, 999]
labels = ["1", "2–4", "5–9", "10–19", "20–49", "50+"]

# Create categorical bin column
df['host_bin'] = pd.cut(host_counts, bins=bins, labels=labels)
# Compute the ratio of hosts
dist = (df['host_bin'].value_counts(normalize=True).sort_index())
```

```{python}
#proportion of hosts with > 2 listings
host_level = df.groupby('host_id')['host_total_listings_count'].max()
multi_host_share = (host_level > 2).mean()
print(f"Proportion of multi-lister hosts (>2 listings): {multi_host_share:.2%}")

#proportion of listings owned by multi-listers
listing_multi_share = (df['host_total_listings_count'] > 2).mean()
print(f"Proportion of listings owned by multi-listers: {listing_multi_share:.2%}")
```

```{python}
#Make a cumulative distribution
#compute cumulative ratio across host-size bins
cum = dist.cumsum()
#graph fitting
fig, ax1 = plt.subplots(figsize=(10, 7))
# Plot a same graph above
ax1.bar(dist.index, dist.values, label="Bin share")
ax1.set_xlabel("Number of listings owned by host")
ax1.set_ylabel("Proportion of hosts")
ax1.set_title("Distribution of Airbnb listings owned by host")
#Create another axis for cumulative line plot
ax2 = ax1.twinx()
ax2.plot(cum.index, cum.values, color="red", marker="o", label="Cumulative ratio")
ax2.set_ylabel("Cumulative ratio")
plt.show()
#Print cumulative ratio values
print("Cumulative share by bin:")
print((cum * 100).round(2).astype(str) + "%")
```
This shows a highly uneven distribution of Airbnb listings across hosts in London. While single-listing hosts remain the largest individual group, a substantial share of activity is concentrated among hosts controlling multiple properties. 

Based on @xie_professional_2021 definition， professional landlords， who own more than 2 properties, account for approximately 35% of all hosts, yet they control around 65% of total Airbnb listings. This disparity indicates that a relatively small group of actors exerts disproportionate influence over the short-term rental market. The cumulative distribution further highlights that as host portfolio size increases, control over listings rises rapidly, particularly among hosts owning five or more properties.

This pattern suggests that Airbnb activity in London is not primarily driven by widespread casual home-sharing, but by a significant level of commercialisation concentrated among multi-property owners. While many hosts participate in the platform at a small scale, the majority of listings—and therefore the majority of potential housing impacts—are associated with professional landlords operating multiple units. This concentration provides empirical support for distinguishing between genuine home-sharing and commercial short-term rental activity when assessing housing impacts and designing targeted regulation.



## Question 3: How many properties would be affected by the opposition’s proposal?
To determine the number of properties affected, we first need to filter out professional landlords, as the opposition proposal only applies to them. Secondly, the extent to which professional landlords are affected depends on the number of properties they own. Therefore, we can assess the degree of impact by counting the number of properties owned by different professional landlords.


### 3.1 Distribution of affected listings by borough

```{python}
#how many listings are affected
pro_hosts = df[df['host_total_listings_count'] > 2]['host_id'].unique()
#Filter all listings under these landlords' names
affected_properties = df[df['host_id'].isin(pro_hosts)]
#Calculate the number of affected properties
n_affected = len(affected_properties)
#Compared to the entire Airbnb market
total_listings = len(df)
affected_ratio = n_affected / total_listings
print(f"There are {n_affected} listings were impacted, which is {affected_ratio:.0%} of total.")
```

```{python}
#How many hosts are affected
affected_hosts = df[df['host_total_listings_count'] > 2]['host_id'].nunique()
total_hosts = df['host_id'].nunique()

affected_host_ratio = affected_hosts / total_hosts

print(f"And there are {affected_hosts} hosts were impacted, which is {affected_host_ratio:.0%} of total.")
```


```{python}
affected_by_area = (
    affected_properties.groupby('neighbourhood_cleansed')
                       .size()
                       .reset_index(name='n_affected')
                       .sort_values('n_affected', ascending=False)
)

plt.figure(figsize=(10,6))
plt.bar(affected_by_area['neighbourhood_cleansed'], affected_by_area['n_affected'])
plt.xticks(rotation=90)
plt.ylabel('Number of Affected Listings')
plt.title('Affected Listings by Borough')
plt.show()
```
The above figure shows the distribution of Airbnb housing affected by the proposal in various borough of London. Westminster seems to be affected far more than other borough, followed by Kensington and Chelsea, Camden and Tower Hamlets, which coincides with the previously determined overall spatial distribution pattern of Airbnb activities.

### 3.2 Display the location of professional landlord listings on a map

```{python}
plt.figure(figsize=(7,7))
plt.scatter(df['longitude'], df['latitude'], s=2, alpha=0.1, label='All Listings')
plt.scatter(affected_properties['longitude'], affected_properties['latitude'], s=4, color='red', alpha=0.5, label='Affected Listings')

plt.legend()
plt.title('Spatial Distribution of Affected Listings (Professional Landlords)')
plt.xlabel('Longitude')
plt.ylabel('Latitude')
plt.show()
```


### 3.3 Affected host's Map

```{python}
#affected listings
df['affected'] = df['host_total_listings_count'] > 2

#Bring into spatial data
affected_gdf = gpd.GeoDataFrame(df,geometry=gpd.points_from_xy(df.longitude, df.latitude),crs="EPSG:4326").to_crs(msoa.crs)
#Spatial join to MSOA
affected_msoa = gpd.sjoin(affected_gdf,msoa[['MSOA11CD', 'geometry']],how='left',predicate='within')
#aggregate by MSOA
msoa_affected_stats = (affected_msoa.groupby('MSOA11CD').agg(total_listings=('id', 'count'),affected_share=('affected', 'mean')).reset_index())

# Merge back to MSOA polygons
msoa_affected_map = msoa.merge(msoa_affected_stats,on='MSOA11CD',how='left')
msoa_affected_map['affected_share'] = msoa_affected_map['affected_share'].fillna(0)

```

```{python}
fig, ax = plt.subplots(figsize=(9,9))

msoa_affected_map.plot(
    column='affected_share',
    cmap='Reds',
    linewidth=0.1,
    edgecolor='white',
    legend=True,
    ax=ax
)

ax.set_title("Proportion of Listings Affected by the Proposal")
ax.set_axis_off()
plt.show()
```
We also plot a map of the proportion of Airbnb housing affected by the proposal. We can see that the affected rate in the centre of London is very high, and then other high ratio areas are scattered on the map, such as wembley and Brent cross, which may produce many professional landlords due to regional characteristics such as stadiums. This indicates that in many high-pressure areas, most housing units are operated by professional landlords and will therefore be subject to proposed regulations.


### Conlusion
From the first paragraph, the opposition's proposal will have a significant impact on the Airbnb market in London. Although only about 35% of hosts will be affected, but these hosts control about 65% of the housing, indicating that the proposal is mainly aimed at a small number of highly commercialised operators, not casual home sharers.

Spatially, in distribution map, the distribution of the affected housing resources is extremely uneven. The impact is concentrated in central London and little part of marginal area, especially in areas previously recognised as Airbnb hotspots. Therefore, we can say that the proposal is spatially targeted, not city-wide, and the most affected areas are the most common and specialised communities for short-term leasing.

Overall, the proposal may significantly reduce the scale of specialised short-term renting activities in high-pressure areas, while the impact on the peripheral and low-intensity Airbnb market is relatively small.



## Question 4: What are the likely pros and cons of the opposition’s proposal (for the Mayor, for residents, and for the city)?
According to the findings from Questions 1–3, the opposition’s proposal to regulate professional Airbnb activity would have differentiated impacts for the Mayor, residents, and the city. Our analysis shows that Airbnb activity in London is highly concentrated, dominated by professional landlords, and spatially uneven, suggesting that a targeted regulatory approach may be more effective than blanket restrictions.

### 4.1  Implication for Mayor

For the Mayor, the main advantage is political and strategic credibility. Focusing regulation on professional short-term rental operators directly reflects the empirical patterns identified in this study, allowing the Mayor to frame the policy as evidence-led, proportionate, and fair. By distinguishing between casual home-sharing and commercial activity, the Mayor can address housing pressures without penalising ordinary residents, consistent with best practice in urban planning (@gurran_when_2017). This framing also strengthens the case for targeted fiscal measures, such as higher Council Tax rates or levies on commercial short-term rentals, which can be justified as internalising external costs in high-impact areas. However, professional landlords are likely to resist regulation through lobbying or legal challenges (@barron_effect_2021), creating political and institutional risks. There is also a risk that adopting an opposition proposal may appear reactive unless clearly communicated as an independent, data-driven strategy.

### 4.2 Implication for Residents 

For residents, especially in central boroughs, the proposal may improve housing availability and neighbourhood stability. As shown in Question 3, many professional Airbnb listings operate on a near full-time basis, reducing long-term rental supply. Regulating this segment may encourage some properties to return to the long-term market, alleviating pressure in the most affected neighbourhoods, even if city-wide rent reductions remain unlikely (@garcia-lopez_short-term_2020). Reduced clustering of short-term rentals may also improve quality of life by lowering noise, turnover, and social disruption (@gurran_when_2017). However, residents may face trade-offs. Airbnb provides flexible accommodation for students, temporary workers, and families in transition, and tighter regulation may reduce these options in central locations. There is also a risk that costs shift to hotels or serviced apartments, disproportionately affecting middle-income users who relied on Airbnb as a relatively affordable option.

### 4.3 Implication for City

At the city scale, targeted regulation may improve housing market efficiency by limiting the conversion of residential properties into commercial short-term rentals, particularly in high-pressure areas. Improved registration and monitoring could also strengthen governance capacity and enable more adaptive regulation over time. Nonetheless, displacement effects remain a concern, as activity may shift to other boroughs or platforms rather than disappear entirely (@garcia-lopez_short-term_2020). Given the uneven geography of Airbnb impacts, uniform city-wide rules may be inefficient, raising questions about spatial fairness and enforcement effectiveness.


## Question 5: Can the story be reframed as a positive one about social mobility or housing opportunity?

The controversy surrounding the ownership of multiple Airbnb properties by a single advisor risks oversimplifying the structure of London’s Airbnb market. Evidence from Questions 1–3 shows that the core issue is not casual home-sharing, but the dominance of professional landlords who control a disproportionate share of listings and operate intensively in central boroughs. This distinction creates scope for a more constructive reframing of the debate.

Rather than portraying Airbnb as inherently harmful, the Mayor can reframe the issue around how economic benefits are distributed and who gains from short-term rental activity. For a subset of London residents, Airbnb continues to function as a source of supplementary income and economic resilience. Small-scale hosts may rent out spare rooms or properties to offset rising living costs, manage mortgage payments, or maintain housing security without exiting the labour market (@arenoe_game_2015; @sundararajan_sharing_2016). In this sense, genuine home-sharing can still be framed as supporting limited forms of social mobility and household stability.

However, the empirical findings indicate that this positive narrative cannot be generalised across the entire market. As shown in Questions 1–3, professional landlords dominate listings in high-demand central areas, transforming Airbnb from a sharing platform into a mechanism for housing commodification. A credible reframing strategy therefore requires differentiation rather than defence of the platform as a whole.

The Mayor can emphasise that regulation is designed to protect socially beneficial forms of home-sharing while curbing large-scale commercial use. This includes clearly communicating that hosts with one or two listings remain part of the sharing economy, whereas professional operators face stricter rules. Regulation can thus be framed not as anti-innovation, but as a means of safeguarding ordinary residents’ income opportunities from being crowded out by elite actors engaged in property accumulation.

In this way, the Mayor can reposition the controversy as part of a broader commitment to balancing innovation, social mobility, and housing access. Optimistic narratives about the sharing economy’s potential (@arenoe_game_2015; @sundararajan_sharing_2016) can coexist with concerns about over-commercialisation (@slee_whats_2015), provided that regulation remains selective, targeted, and grounded in empirical evidence from the London context.


## References
